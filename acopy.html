<!DOCTYPE html>
<html>
    <head>
        <title>IV: Project</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="DC.title" content="Dataset: gis/zone30 map | The Datatank"/>
        <base target="_parent" />

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script type="text/javascript" src='http://datasets.antwerpen.be/v4/public/js/leaflet.min.js'></script>
        <link rel="stylesheet" href="http://datasets.antwerpen.be/v4/public/css/leaflet.css?v=1.0" />
        <style>
            body { margin:0; padding:0; font-family: sans-serif}
            #map { position:absolute; top:0; bottom:0; width:100%; }
            .fiets-route {
                opacity: 0.0;
                stroke: red;
                cursor: pointer;
            }
            #heatmap-controls{
                background: white;
                padding: 10px;
                border-radius: 5;
                box-shadow: 1px 1px 5px black;
            }
        </style>
    </head>
    <body>
        <div id='map'></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.js" integrity="sha256-j2LsvgOlQFIb2Mphb+tX7d5pNmFdpsJU+s5GNo3z63g=" crossorigin="anonymous"></script>
    <script src="/js/utility.js"></script>
    <script src="/js/var.js"></script>
    <script src="/js/heatmap/leafheat.js"></script>
    <script src="/js/story/story.js"></script>
    <script src="/js/filters.js"></script>
    <script src="/js/mapsetup.js"></script>
    <script src="/js/datareading.js"></script>

        <script>
            function toggleHeatmap(e){
                if(!e.checked){
                    heatMap.setOptions({show: false});
                } else {
                    heatMap.setOptions({show: true});
                }
            }
            function optionsChange(slider, option){
                let newoption = {};
                newoption[option] = slider.value;
                slider.parentElement.getElementsByClassName("currentvalue")[0].innerHTML = slider.value;
                heatMap.setOptions(newoption);
            }
            
        </script>
        <div id="controls" style="position: absolute; top:0px; bottom: 0px; left: 0px; right: 0px; z-index: 200; pointer-events:none;">
            <div id="heatmap-controls" style="position: absolute; top: 0px; right: 0px; z-index: 100; pointer-events: all;">
                <h2>Heatmap Controls</h2>
                <div>
                    <input type="checkbox" checked onchange="toggleHeatmap(this)"> Heatmap on
                </div>
                <div>
                    <h3>Line Width</h3>
                    1 <input type="range" min="1" max="30" value="3" onchange="optionsChange(this, 'lineWidth')"> 30 <span class="currentvalue"></span> 
                </div>
                <div>
                    <h3>Blur Radius</h3>
                    0 <input type="range" min="0" max="30" value="0" onchange="optionsChange(this, 'blurSize')"> 30 <span class="currentvalue"></span> 
                </div>
                <div>
                    <h3>Global Alpha</h3>
                    0 <input type="range" min="0" max="1" value="0.03" step="0.005" onchange="optionsChange(this, 'globalAlpha')" > 1 <span class="currentvalue"></span> 
                </div>
                <div>
                    <button onclick="heatMap.resetDefaultOptions()">Reset default</button>
                </div>
            </div>
        </div>
    </body>
</html>
